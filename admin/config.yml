backend:
  name: git-gateway
  branch: main

publish_mode: simple

media_folder: "images/uploads"
public_folder: "/images/uploads"

collections:
  # -----------------------------
  # HOME PAGE CARDS (brands.json)
  # -----------------------------
  - name: "home_cards"
    label: "Home Page Cards"
    delete: false
    editor:
      preview: false
    files:
      - name: "brands"
        label: "Brands list (brands.json)"
        file: "data/brands.json"
        format: "json"
        fields:
          # Your brands.json is a top-level array, so name is "" (empty string).
          - label: "Brands"
            name: ""
            widget: "list"
            summary: "{{fields.name}}"
            fields:
              - { label: "ID", name: "id", widget: "string" }
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Puffs", name: "puffs", widget: "string", required: false }
              - { label: "Price Text", name: "priceText", widget: "string", required: false }
              - { label: "Deal Text", name: "dealText", widget: "string", required: false }
              - { label: "Card Image", name: "cardImage", widget: "image", required: false }
              - { label: "Brand File Path", name: "file", widget: "string" }

              # Optional but recommended for reliable sorting
              - { label: "Clearance", name: "clearance", widget: "boolean", required: false, default: false }
              - { label: "Sort Price", name: "sortPrice", widget: "number", required: false, value_type: "float" }

  # ---------------------------------------
  # BRAND FILES (data/brands/*.json)
  # ---------------------------------------
  - name: "brand_files"
    label: "Brand Menus (Flavors)"
    folder: "data/brands"
    create: true
    extension: "json"
    format: "json"
    editor:
      preview: false

    # This fixes the "blank list rows" issue
    summary: "{{filename}} â€” {{brand.name}}"
    identifier_field: "brand.name"

    fields:
      - label: "Brand"
        name: "brand"
        widget: "object"
        fields:
          - { label: "Name", name: "name", widget: "string" }
          - { label: "Puffs", name: "puffs", widget: "string", required: false }
